(this["webpackJsonptaiwan-photography-map-react"]=this["webpackJsonptaiwan-photography-map-react"]||[]).push([[2],[,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(1),a=Object(c.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})},function(e,t,n){"use strict";var c=n(0),a=(n(1),n(7)),o=n.n(a),i=n(26),r=n.n(i);t.a=function(e){return o.a.createPortal(Object(c.jsx)("div",{className:r.a.Backdrop,onClick:e.onClick}),document.getElementById("backdrop-hook"))}},function(e,t,n){"use strict";var c=n(0),a=(n(1),n(5));n(37);t.a=function(e){return e.href?Object(c.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(c.jsx)(a.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(c.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}},,,,,function(e,t,n){"use strict";var c=n(0);n(1),n(47);t.a=function(e){return Object(c.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(c.jsx)("div",{className:"lds-dual-ring"})})}},function(e,t,n){"use strict";var c=n(21),a=n(0),o=n(1),i=n.n(o),r=n(7),s=n.n(r),l=n(50),j=n(13),u=(n(46),function(e){var t=Object(a.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(a.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(a.jsx)("h2",{children:e.header})}),Object(a.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(a.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))});t.a=function(e){return Object(a.jsxs)(i.a.Fragment,{children:[e.show&&Object(a.jsx)(j.a,{onClick:e.onCancel}),Object(a.jsx)(l.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(a.jsx)(u,Object(c.a)({},e))})]})}},,function(e,t,n){},,,,function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__3lZf9"}},function(e,t,n){e.exports={NavLink:"NavLinks_NavLink__1ry3r",active:"NavLinks_active__3CZXK"}},function(e,t,n){e.exports={MainHeader:"MainHeader_MainHeader__2fg5i"}},function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__3hCnF"}},,,,,,,,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,a=n(0),o=n(1),i=n.n(o),r=n(7),s=n.n(r),l=(n(22),n(2)),j=n(5),u=n(10),b=n(12),d=n(14),h=n(20),O=n(27),x=n.n(O),m=function(e){var t=Object(o.useContext)(b.a),n=Object(o.useState)(!1),c=Object(u.a)(n,2),r=c[0],s=c[1],l=function(){return s(!1)};return Object(a.jsxs)("ul",{className:x.a.NavLink,children:[Object(a.jsx)(h.a,{show:r,onCancel:l,header:"\u78ba\u5b9a\u767b\u51fa\uff1f",footerClass:"place-item__modal-actions",footer:Object(a.jsxs)(i.a.Fragment,{children:[Object(a.jsx)(d.a,{inverse:!0,onClick:l,children:"\u53d6\u6d88"}),Object(a.jsx)(d.a,{onClick:function(){t.logout(),l()},children:"\u78ba\u5b9a"})]})}),Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/",exact:!0,children:"\u9996\u9801"})}),Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/discover",exact:!0,children:"\u63a2\u7d22"})}),Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/map",exact:!0,children:"\u5730\u5716"})}),Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/weather",exact:!0,children:"\u5929\u6c23"})}),t.isLoggedIn&&Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/photo/new",exact:!0,children:"\u4e0a\u50b3\u7167\u7247"})}),t.isLoggedIn&&Object(a.jsx)("li",{style:{cursor:"pointer"},onClick:function(){return s(!0)},children:Object(a.jsx)("a",{children:"\u767b\u51fa"})}),!t.isLoggedIn&&Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/login",exact:!0,children:"\u767b\u5165"})}),!t.isLoggedIn&&Object(a.jsx)("li",{children:Object(a.jsx)(j.c,{to:"/signup",exact:!0,children:"\u8a3b\u518a"})})]})},p=n(28),f=n.n(p),g=function(e){return Object(a.jsxs)("div",{className:f.a.MainHeader,children:[Object(a.jsxs)("button",{onClick:e.open,children:[Object(a.jsx)("span",{}),Object(a.jsx)("span",{}),Object(a.jsx)("span",{})]}),Object(a.jsx)("h1",{children:Object(a.jsx)(j.b,{to:"/",children:"\u53f0\u7063\u651d\u5f71\u5730\u5716"})}),Object(a.jsx)("nav",{children:Object(a.jsx)(m,{})})]})},v=n(50),k=n(29),y=n.n(k),C=function(e){var t=Object(a.jsx)(v.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(a.jsx)("aside",{className:y.a.SideDrawer,onClick:e.onClick,children:e.children})});return s.a.createPortal(t,document.getElementById("drawer-hook"))},w=n(13),N=function(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),c=n[0],i=n[1],r=function(){i(!1)};return Object(a.jsxs)("header",{children:[c&&Object(a.jsx)(w.a,{onClick:r}),Object(a.jsx)(C,{show:c,onClick:r,children:Object(a.jsx)("nav",{children:Object(a.jsx)(m,{})})}),Object(a.jsx)(g,{open:function(){i(!0)}})]})},_=n(19),S=(n(48),i.a.lazy((function(){return Promise.all([n.e(1),n.e(5)]).then(n.bind(null,95))}))),I=i.a.lazy((function(){return Promise.all([n.e(6),n.e(13)]).then(n.bind(null,96))})),D=i.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,97))})),L=i.a.lazy((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,90))})),z=i.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,91))})),P=i.a.lazy((function(){return n.e(14).then(n.bind(null,92))})),E=i.a.lazy((function(){return n.e(7).then(n.bind(null,98))})),B=i.a.lazy((function(){return n.e(8).then(n.bind(null,99))})),F=i.a.lazy((function(){return n.e(9).then(n.bind(null,93))})),T=function(){var e,t=function(){var e=Object(o.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(o.useState)(),r=Object(u.a)(i,2),s=r[0],l=r[1],j=Object(o.useState)(!1),b=Object(u.a)(j,2),d=b[0],h=b[1],O=Object(o.useCallback)((function(e,t,n){a(t),h(e);var c=n||new Date((new Date).getTime()+36e5);l(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[]),x=Object(o.useCallback)((function(){a(null),l(null),h(null),localStorage.removeItem("userData")}),[]);return Object(o.useEffect)((function(){if(n&&s){var e=s.getTime()-(new Date).getTime();c=setTimeout(x,e)}else clearTimeout(c)}),[n,x,s]),Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&O(e.userId,e.token,new Date(e.expiration))}),[O]),{token:n,login:O,logout:x,userId:d}}(),n=t.token,i=t.login,r=t.logout,s=t.userId;return e=n?Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/weather",component:S}),Object(a.jsx)(l.b,{path:"/photo/new",component:D}),Object(a.jsx)(l.b,{path:"/map/:city/:scape",component:B}),Object(a.jsx)(l.b,{path:"/map/:city",component:E}),Object(a.jsx)(l.b,{path:"/map",component:P}),Object(a.jsx)(l.b,{path:"/discover",component:F}),Object(a.jsx)(l.b,{exact:!0,path:"/",component:I}),Object(a.jsx)(l.a,{to:"/"})]}):Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{path:"/weather",component:S}),Object(a.jsx)(l.b,{path:"/login",component:L}),Object(a.jsx)(l.b,{path:"/signup",component:z}),Object(a.jsx)(l.b,{path:"/map/:city/:scape",component:B}),Object(a.jsx)(l.b,{path:"/map/:city",component:E}),Object(a.jsx)(l.b,{path:"/map",component:P}),Object(a.jsx)(l.b,{path:"/discover",component:F}),Object(a.jsx)(l.b,{exact:!0,path:"/",component:I}),Object(a.jsx)(l.a,{to:"/"})]}),Object(a.jsx)(b.a.Provider,{value:{isLoggedIn:!!n,token:n,userId:s,login:i,logout:r},children:Object(a.jsxs)(j.a,{children:[Object(a.jsx)(N,{}),Object(a.jsx)("main",{className:"headerHeight",children:Object(a.jsx)(o.Suspense,{fallback:Object(a.jsx)("div",{className:"center",children:Object(a.jsx)(_.a,{asOverlay:!0})}),children:e})})]})})},H=function(e){e&&e instanceof Function&&n.e(15).then(n.bind(null,94)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(T,{})}),document.getElementById("root")),H()}],[[49,3,4]]]);
//# sourceMappingURL=main.ec925c69.chunk.js.map